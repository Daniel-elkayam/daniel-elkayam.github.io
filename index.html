<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<title>דניאל אלקיים – פיקוח בנייה</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- WhatsApp Preview -->
<meta property="og:title" content="דניאל אלקיים – פיקוח בנייה">
<meta property="og:description" content="ניהול ופיקוח בנייה ברמה הגבוהה ביותר">
<meta property="og:image" content="https://el-elkayam.github.io/3.jpg">
<meta property="og:url" content="https://el-elkayam.github.io">
<meta property="og:type" content="website">

<link rel="stylesheet" href="style.css">
</head>

<body>

<div id="stars"></div>

<header class="hero">
  <h1>דניאל אלקיים</h1>
  <p>ניהול ופיקוח בנייה</p>
</header>

<section class="gallery-section">
  <button id="openGallery" class="main-btn">
    לצפייה בסרטונים ובתמונות
  </button>
</section>

<div id="modal" class="modal hidden">
  <span class="close" onclick="closeModal()">✕</span>

  <!-- חצים – דסקטופ בלבד -->
  <span class="arrow left" onclick="prev()">❮</span>

  <div class="media-wrapper">
    <div id="mediaContainer"></div>
  </div>

  <span class="arrow right" onclick="next()">❯</span>
</div>

<script>
/* ❗ 3.jpg לא נמצא כאן */
const media = [
  "1.jpg","2.jpg","4.jpg","5.jpg","6.jpg",
  "7.jpg","8.jpg","9.jpg","10.jpg",
  "1.mp4","2.mp4"
];

let index = 0;
let scale = 1;
let posX = 0;
let posY = 0;
let startX = 0;
let startY = 0;
let isDragging = false;

const modal = document.getElementById("modal");
const container = document.getElementById("mediaContainer");

/* פתיחת גלריה */
document.getElementById("openGallery").onclick = () => {
  modal.classList.remove("hidden");
  loadMedia();
};

/* סגירה */
function closeModal(){
  modal.classList.add("hidden");
  container.innerHTML = "";
  resetTransform();
}

/* טעינה */
function loadMedia(){
  container.innerHTML = "";
  resetTransform();

  const file = media[index];

  if(file.endsWith(".mp4")){
    const v = document.createElement("video");
    v.src = file;
    v.controls = true;
    v.autoplay = true;
    container.appendChild(v);
  } else {
    const img = document.createElement("img");
    img.src = file;
    container.appendChild(img);

    /* ZOOM */
    img.addEventListener("wheel", e=>{
      e.preventDefault();
      scale += e.deltaY * -0.001;
      scale = Math.min(Math.max(1, scale), 3);
      applyTransform(img);
    });

    /* גרירה */
    img.addEventListener("mousedown", e=>{
      isDragging = true;
      startX = e.clientX - posX;
      startY = e.clientY - posY;
    });

    window.addEventListener("mouseup", ()=> isDragging=false);

    window.addEventListener("mousemove", e=>{
      if(!isDragging) return;
      posX = e.clientX - startX;
      posY = e.clientY - startY;
      applyTransform(img);
    });

    /* MOBILE */
    let touchStartDist = 0;

    img.addEventListener("touchstart", e=>{
      if(e.touches.length === 2){
        touchStartDist = getDistance(e.touches);
      }
      if(e.touches.length === 1){
        isDragging = true;
        startX = e.touches[0].clientX - posX;
        startY = e.touches[0].clientY - posY;
      }
    });

    img.addEventListener("touchmove", e=>{
      if(e.touches.length === 2){
        const dist = getDistance(e.touches);
        scale = Math.min(3, Math.max(1, dist / touchStartDist));
      }
      if(e.touches.length === 1 && isDragging){
        posX = e.touches[0].clientX - startX;
        posY = e.touches[0].clientY - startY;
      }
      applyTransform(img);
    });

    img.addEventListener("touchend", ()=> isDragging=false);
  }
}

function applyTransform(el){
  el.style.transform = `translate(${posX}px,${posY}px) scale(${scale})`;
}

function resetTransform(){
  scale = 1;
  posX = 0;
  posY = 0;
}

function getDistance(t){
  return Math.hypot(
    t[0].clientX - t[1].clientX,
    t[0].clientY - t[1].clientY
  );
}

/* ניווט */
function next(){ index=(index+1)%media.length; loadMedia(); }
function prev(){ index=(index-1+media.length)%media.length; loadMedia(); }

/* SWIPE */
let swipeX = 0;
modal.addEventListener("touchstart", e=>{
  swipeX = e.touches[0].clientX;
});
modal.addEventListener("touchend", e=>{
  const dx = swipeX - e.changedTouches[0].clientX;
  if(dx > 60) next();
  if(dx < -60) prev();
});
</script>

</body>
</html>
